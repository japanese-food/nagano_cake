<h1>ショッピングカート</h1>
 <%= button_to "カートを空にする", destroy_all_cart_items_path, method: :delete %>

<p>商品名</p>
<p>単価(税込み)</p>
<p>数量</p>
<p>小計</p>
<br>
<p>合計金額</p>


<% @cart_items.each do |cart_item| %>

  <p><%= cart_item.product.name %></p>

<p><%= number_to_currency(cart_item.product.with_tax_price, strip_insignificant_zeros: true, :unit => "￥") %></p>

<p><%= cart_item.quantity %></p>

    <%= form_with model: @cart_item, url: cart_item_path(cart_item), method: :patch do |f| %>
    <%= f.select :quantity, [['1',1], ['2',2], ['3',3], ['4',4], ['5',5], ['6',6], ['7',7], ['8',8], ['9',9], ['10',10]] %>
    <%= f.submit '変更' %>
    <% end %>

<p><%= number_to_currency(cart_item.subtotal, strip_insignificant_zeros: true, :unit => "￥") %></p>

<p><%= button_to "Delete", cart_item_path(cart_item), method: :delete %></p>
   <%#= link_to "削除する", controller: "public/cart_items", action: "destroy", id: cart_item %>

   <% @total_price += cart_item.subtotal %>

<% end %>

<%= number_to_currency(@total_price, strip_insignificant_zeros: true, :unit => "￥") %>


<%= link_to "買い物を続ける", root_path %>
<p>情報入力に進む</p>

